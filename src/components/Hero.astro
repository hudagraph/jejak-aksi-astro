---
const poster = "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1400&auto=format&fit=crop";
---

<section id="hero" class="relative overflow-hidden">
  <div class="absolute inset-0 -z-10 bg-black">
    <video
      id="hero-video"
      class="w-full h-full object-cover opacity-0 transition-opacity duration-1000"
      muted
      playsinline
      autoplay
      loop
      preload="metadata"
      poster={poster}
    >
        <!-- Source akan diisi oleh script di bawah -->
    </video>
    
    <!-- Gambar cadangan jika video gagal -->
    <img id="hero-fallback" src={poster} alt="Hero background" class="w-full h-full object-cover hidden" />
    
    <div class="absolute inset-0 bg-gradient-to-tr from-black/35 via-primary/40 to-transparent" />
  </div>

  <div class="max-w-6xl mx-auto px-4 py-24 md:py-28 grid md:grid-cols-2 gap-10 items-center">
    <div class="container reveal">
      <h1 class="font-heading text-4xl md:text-5xl font-bold text-white leading-tight mb-4 drop-shadow">
        Bergerak Bersama,<br/>Bertumbuh dengan Makna
      </h1>
      <p class="mb-6 text-white/90 max-w-xl">
        Jejak Aksi adalah Gerakan kepemudaan yang berfokus pada pembentukan karakter integritas dan aksi peduli terhadap isu sosial dan lingkungan, serta aktivitas peningkatan kompetensi dan pemberdayaan berkelanjutan melalui 4 pilar; Entrepreneurship – Education – Environment – Social.
      </p>
      <div class="flex gap-3 flex-wrap">
        <a href="#join"  class="btn-rounded btn-accent">Gabung Relawan Awal</a>
        <a href="#cerita" class="btn-rounded bg-white/10 text-white ring-1 ring-white/30">Lihat Cerita</a>
      </div>
    </div>
  </div>
</section>

<script>
    // Logic untuk memutar video dan fallback jika gagal (Vanilla JS)
    const videoEl = document.getElementById('hero-video');
    const fallbackEl = document.getElementById('hero-fallback');
    
    const sources = [
        { src: "/videos/hero.mp4", type: "video/mp4" },
        { src: "https://cdn.coverr.co/videos/coverr-aerial-shot-of-forest-4146/1080p.mp4", type: "video/mp4" },
        { src: "https://assets.mixkit.co/videos/preview/mixkit-aerial-view-of-trees-on-mountain-515-large.mp4", type: "video/mp4" }
    ];

    let currentSource = 0;

    function loadSource(index) {
        if(index >= sources.length) {
            videoEl.style.display = 'none';
            fallbackEl.classList.remove('hidden');
            return;
        }
        
        videoEl.src = sources[index].src;
        videoEl.load();
        
        const playPromise = videoEl.play();
        if (playPromise !== undefined) {
            playPromise.then(() => {
                videoEl.classList.remove('opacity-0');
            }).catch(error => {
                loadSource(index + 1);
            });
        }
    }

    videoEl.addEventListener('error', () => loadSource(currentSource + 1), true);
    loadSource(0);
</script>