---
import { getCollection } from 'astro:content';
import MainLayout from '../../layouts/MainLayout.astro';
import Navbar from '../../components/Navbar.astro';
import Footer from '../../components/Footer.astro';

const allKarya = await getCollection('karya');
const sortedKarya = allKarya.sort((a, b) => new Date(b.data.pubDate) - new Date(a.data.pubDate));
---

<MainLayout title="Galeri Karya - Jejak Aksi">
  <Navbar />
  <main class="pt-24 pb-20 container mx-auto px-4">
    <div class="text-center mb-16">
      <h1 class="text-4xl font-bold mb-4">Galeri Karya</h1>
      <p class="text-gray-600">Kumpulan karya kreatif dari hati para relawan.</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      {sortedKarya.map((item) => (
         <div class="group relative bg-white rounded-lg overflow-hidden border border-gray-100 shadow-sm hover:shadow-lg transition-all">
            <div class="aspect-square overflow-hidden bg-gray-100">
               <img src={item.data.image} alt={item.data.title} class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" />
            </div>
            <div class="p-4">
                <h3 class="font-bold text-lg mb-1">{item.data.title}</h3>
                <p class="text-sm text-gray-500 mb-3">{item.data.description}</p>
                <a href={`/karya/${item.slug}`} class="block text-center w-full py-2 border border-primary text-primary rounded hover:bg-primary hover:text-white transition-colors">Lihat Karya</a>
            </div>
         </div>
      ))}
    </div>
  </main>
  <Footer />
</MainLayout>